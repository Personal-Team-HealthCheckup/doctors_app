default_platform(:ios)

platform :ios do
  desc "Build for simulator (no signing needed)"
  lane :build_simulator do
    build_app(
      scheme: "doctor_app",
      sdk: "iphonesimulator",
      configuration: "Debug",
      export_method: "development",
      skip_package_ipa: true,      # ðŸš€ donâ€™t try to package IPA
      skip_codesigning: true,      # ðŸš€ no provisioning needed
      destination: "generic/platform=iOS Simulator"
      # destination: "platform=iOS Simulator,name=iPhone 16 Pro,OS=18.5"
    )
  end

  desc "Run iOS tests"
  lane :tests do
    scan(
      scheme: "doctor_app",
      devices: ["iPhone 15"],
      clean: true
    )
  end
end
